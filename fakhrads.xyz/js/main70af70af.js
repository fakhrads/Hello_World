var custom=new function(){var e=this;e.request=null,e.confirm=function(e,t,r,a){var i;return i=(0,templates["modal/confirm"])($.extend({},!0,{confirm_button:"OK",cancel_button:"Cancel",width:"600px"},a,{title:e,confirm_message:t})),$(window.document.body).append(i),$("#confirmModal").modal({}),$("#confirmModal").on("hidden.bs.modal",function(e){$("#confirmModal").remove()}),$("#confirm_yes").on("click",function(e){return $("#confirm_yes").unbind("click"),$("#confirmModal").modal("hide"),r.call()})},e.ajax=function(t){var r=$.extend({},!0,t);"object"==typeof t&&(t.beforeSend=function(){"function"==typeof r.beforeSend&&r.beforeSend()},t.success=function(e){"function"==typeof r.success&&r.success(e)},null!=e.request&&e.request.abort(),e.request=$.ajax(t))},e.notify=function(e){var t,r,a=$("body");if(a.addClass("bottom-right"),"object"!=typeof e)return!1;for(t in e)r=$.extend({},!0,{type:"success",delay:8e3,text:""},e[t]),void 0!==r.text&&null!=r.text&&$.notify({message:r.text.toString()},{type:r.type,placement:{from:"bottom",align:"right"},z_index:2e3,delay:r.delay,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},e.sendBtn=function(t,r){if("object"!=typeof r&&(r={}),!t.hasClass("active")){t.addClass("has-spinner");var a=$.extend({},!0,r);a.url=t.attr("href"),$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),a.beforeSend=function(){t.addClass("active")},a.success=function(a){t.removeClass("active"),$(".spinner",t).remove(),"success"==a.status?"function"==typeof r.callback&&r.callback(a):"error"==a.status&&e.notify({0:{type:"danger",text:a.message}})},e.ajax(a)}},e.sendFrom=function(t,r,a){if("object"!=typeof a&&(a={}),!t.hasClass("active")){t.addClass("has-spinner");var i=$.extend({},!0,a),o=$(".error-summary",r);i.url=r.attr("action"),i.type="POST",$(".spinner",t).remove(),t.prepend('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>'),i.beforeSend=function(){t.addClass("active"),o.length&&(o.addClass("hidden"),o.html(""))},i.success=function(i){t.removeClass("active"),$(".spinner",t).remove(),"success"==i.status?"function"==typeof a.callback&&a.callback(i):"error"==i.status&&(i.message&&(o.length?(o.html(i.message),o.removeClass("hidden")):e.notify({0:{type:"danger",text:i.message}})),i.errors&&$.each(i.errors,function(e,t){r.yiiActiveForm("updateAttribute",e,t)}),"function"==typeof a.errorCallback&&a.errorCallback(i))},e.ajax(i)}},e.generatePassword=function(e){void 0===e&&(e=8);var t,r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="",i=r.length;for(t=0;t<e;++t)a+=r.charAt(Math.floor(Math.random()*i));return a}},customModule={};window.modules={},$(function(){"object"==typeof window.modules&&$.each(window.modules,function(e,t){void 0!==customModule[e]&&customModule[e].run(t)})});var templates={};templates["addfunds/description"]=_.template('<div class="form-group fields" id="order_<%= name %>">\n    <label class="control-label" for="field-<%= name %>"><%= label %></label>\n    <div class="panel-body border-solid border-rounded text-center"><%= value %></div>\n</div>'),templates["addfunds/hidden"]=_.template('<input class="fields" name="AddFoundsForm[fields][<%= name %>]" value="<%= value %>" type="hidden" id="field-<%= name %>"/>'),templates["addfunds/input"]=_.template('<div class="form-group fields" id="order_<%= name %>">\n    <label class="control-label" for="field-<%= name %>"><%= label %></label>\n    <input class="form-control" name="AddFoundsForm[fields][<%= name %>]" value="<%= value %>" type="text" id="field-<%= name %>"/>\n</div>'),templates["neworder/order_comment"]=_.template('<div class="form-group hidden fields" id="order_comment">\n    <label class="control-label" for="field-orderform-fields-comment"><%= label[\'comments\'] %></label>\n    <textarea class="form-control" name="OrderForm[comment]" id="field-orderform-fields-comment" cols="30" rows="10"><%= data[\'comment\'] %></textarea>\n</div>'),templates["neworder/order_delay"]=_.template('<div class="form-group hidden fields" id="order_delay">\n    <div class="row">\n        <div class="col-xs-6">\n            <label class="control-label" for="field-orderform-fields-delay"><%= label[\'delay\'] %></label>\n            <select class="form-control" name="OrderForm[delay]" id="field-orderform-fields-delay">\n                <% _.forEach(delays, function(delayLabel, delayValue) {%>\n                <option value="<%= delayValue %>" <% if (delayValue == data[\'delay\']) { %> selected <% } %>><%= delayLabel %></option>\n                <%}); %>\n            </select>\n        </div>\n        <div class="col-xs-6">\n            <label for="field-orderform-fields-expiry"><%= label[\'expiry\'] %></label>\n            <div class="input-group">\n                <input class="form-control datetime" name="OrderForm[expiry]" value="<%= data[\'expiry\'] %>" type="text" id="field-orderform-fields-expiry"/>\n                <span class="input-group-btn">\n                    <button class="btn btn-default clear-datetime" type="button" data-rel="#field-orderform-fields-expiry"><span class="fa fa-trash-o"></span></button>\n                </span>\n            </div>\n        </div>\n    </div>\n</div>'),templates["neworder/order_dripfeed"]=_.template('<div id="dripfeed">\n    <div class="form-group fields hidden" id="order_check">\n        <label class="control-label has-depends " for="field-orderform-fields-check">\n            <input name="OrderForm[check]" value="1" type="checkbox" id="field-orderform-fields-check" <% if (data[\'check\']) { %> checked <% } %> />\n            <%= label[\'dripfeed\'] %>\n        </label>\n        <div class="hidden depend-fields" id="dripfeed-options" data-depend="field-orderform-fields-check">\n            <div class="form-group">\n                <label class="control-label" for="field-orderform-fields-runs"><%= label[\'dripfeed.runs\'] %></label>\n                <input class="form-control" name="OrderForm[runs]" value="<%= data[\'runs\'] %>" type="text" id="field-orderform-fields-runs" />\n            </div>\n\n            <div class="form-group">\n                <label class="control-label" for="field-orderform-fields-interval"><%= label[\'dripfeed.interval\'] %></label>\n                <input class="form-control" name="OrderForm[interval]" value="<%= data[\'interval\'] %>" type="text" id="field-orderform-fields-interval" />\n            </div>\n\n            <div class="form-group">\n                <label class="control-label" for="field-orderform-fields-total-quantity"><%= label[\'dripfeed.total.quantity\'] %></label>\n                <input class="form-control" name="OrderForm[total_quantity]" value="<%= data[\'total_quantity\'] %>" type="text" id="field-orderform-fields-total-quantity" readonly=""/>\n            </div>\n        </div>\n    </div>\n</div>'),templates["neworder/order_hashtag"]=_.template('<div class="form-group hidden fields" id="order_hashtag">\n    <label class="control-label" for="field-orderform-fields-hashtag"><%= label[\'hashtag\'] %></label>\n    <input class="form-control" name="OrderForm[hashtag]" value="<%= data[\'hashtag\'] %>" type="text" id="field-orderform-fields-hashtag"/>\n</div>'),templates["neworder/order_hashtags"]=_.template('<div class="form-group hidden fields" id="order_hashtags">\n    <label class="control-label" for="field-orderform-fields-hashtags"><%= label[\'hashtags\'] %></label>\n    <textarea class="form-control" name="OrderForm[hashtags]" id="field-orderform-fields-hashtags" cols="30" rows="10"><%= data[\'hashtags\'] %></textarea>\n</div>'),templates["neworder/order_keywords"]=_.template('<div class="form-group hidden fields" id="order_keywords">\n    <label class="control-label" for="field-orderform-fields-keywords"><%= label[\'keywords\'] %></label>\n    <textarea class="form-control" name="OrderForm[keywords]" id="field-orderform-fields-keywords" cols="30" rows="10"><%= data[\'keywords\'] %></textarea>\n</div>'),templates["neworder/order_link"]=_.template('<div class="form-group hidden fields" id="order_link">\n    <label class="control-label" for="field-orderform-fields-link"><%= label[\'link\'] %></label>\n    <input class="form-control" name="OrderForm[link]" value="<%= data[\'link\'] %>" type="text" id="field-orderform-fields-link"/>\n</div>'),templates["neworder/order_media_url"]=_.template('<div class="form-group hidden fields" id="order_mediaUrl">\n    <label class="control-label" for="field-orderform-fields-mediaUrl"><%= label[\'mediaurl\'] %></label>\n    <input class="form-control" name="OrderForm[mediaUrl]" value="<%= data[\'mediaUrl\'] %>" type="text" id="field-orderform-fields-mediaUrl"/>\n</div>'),templates["neworder/order_mention_usernames"]=_.template('<div class="form-group hidden fields" id="order_mentionUsernames">\n    <label class="control-label" for="field-orderform-fields-mentionUsernames"><%= label[\'usernames\'] %></label>\n    <textarea class="form-control" name="OrderForm[mentionUsernames]" id="field-orderform-fields-mentionUsernames" cols="30" rows="10"><%= data[\'mentionUsernames\'] %></textarea>\n</div>'),templates["neworder/order_min"]=_.template('<div class="form-group hidden fields" id="order_min">\n    <label class="control-label" for="order_count"><%= label[\'quantity\'] %></label>\n    <div class="row">\n        <div class="col-xs-6">\n            <input type="text" class="form-control" id="order_count" name="OrderForm[min]" value="<%= data[\'min\'] %>" placeholder="<%= label[\'min\'] %>" />\n        </div>\n\n        <div class="col-xs-6">\n            <input type="text" class="form-control" id="order_count" name="OrderForm[max]" value="<%= data[\'max\'] %>" placeholder="<%= label[\'max\'] %>" />\n        </div>\n    </div>\n</div>'),templates["neworder/order_posts"]=_.template('<div class="form-group hidden fields" id="order_posts">\n    <label class="control-label" for="field-orderform-fields-posts"><%= label[\'new_posts\'] %></label>\n    <input class="form-control" name="OrderForm[posts]" value="<%= data[\'posts\'] %>" type="text" id="field-orderform-fields-posts"/>\n</div>'),templates["neworder/order_quantity"]=_.template('<div class="form-group hidden fields" id="order_quantity">\n    <label class="control-label" for="field-orderform-fields-quantity"><%= label[\'quantity\'] %></label>\n    <input class="form-control" name="OrderForm[quantity]" value="<%= data[\'quantity\'] %>" type="text" id="field-orderform-fields-quantity"/>\n</div>'),templates["neworder/order_user_name"]=_.template('<div class="form-group hidden fields" id="order_user_name">\n    <label class="control-label" for="field-orderform-fields-user_name"><%= label[\'username\'] %></label>\n    <input class="form-control w-full" name="OrderForm[user_name]" value="<%= data[\'user_name\'] %>" type="text" id="field-orderform-fields-user_name"/>\n</div>'),templates["neworder/order_username"]=_.template('<div class="form-group hidden fields" id="order_username">\n    <label class="control-label" for="field-orderform-fields-username"><%= label[\'username\'] %></label>\n    <input class="form-control" name="OrderForm[username]" value="<%= data[\'username\'] %>" type="text" id="field-orderform-fields-username"/>\n</div>'),templates["neworder/order_usernames"]=_.template('<div class="form-group hidden fields" id="order_usernames">\n    <label class="control-label" for="field-orderform-fields-usernames"><%= label[\'usernames\'] %></label>\n    <textarea class="form-control w-full" name="OrderForm[usernames]" id="field-orderform-fields-usernames" cols="30" rows="10"><%= data[\'usernames\'] %></textarea>\n</div>'),templates["neworder/order_usernames_custom"]=_.template('<div class="form-group hidden fields" id="order_usernames_custom">\n    <label class="control-label" for="field-orderform-fields-usernames_custom"><%= label[\'usernames\'] %></label>\n    <textarea class="form-control" name="OrderForm[usernames_custom]" id="field-orderform-fields-usernames_custom" cols="30" rows="10"><%= data[\'usernames_custom\'] %></textarea>\n</div>'),templates["user/user_info_modal"]=_.template('\x3c!-- Modal --\x3e\n<div class="modal fade" id="userInfoModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">\n    <div class="modal-dialog" role="document">\n        <form action="<%= action %>" id="userInfoForm" method="POST" class="modal-content">\n            <div class="modal-body">\n                <div id="userInfoError" class="error-summary alert alert-danger hidden"></div>\n                <div class="form-group">\n                    <label for="first_name"><%= labels[\'first_name\'] %></label>\n                    <input type="text" class="form-control" id="first_name" name="UpdateUserInfoFrom[first_name]" value="<%= values[\'first_name\'] %>">\n                </div>\n                <div class="form-group">\n                    <label for="last_name"><%= labels[\'last_name\'] %></label>\n                    <input type="text" class="form-control" id="last_name" name="UpdateUserInfoFrom[last_name]" value="<%= values[\'last_name\'] %>">\n                </div>\n\n                <input type="hidden" name="_csrf" value="<%= csrftoken %>">\n\n                <button type="submit" class="btn btn-primary" id="userInfoSubmit"><%= labels[\'submit_btn\'] %></button>\n            </div>\n        </form>\n    </div>\n</div>'),customModule.layouts={run:function(e){$(document).on("click",".alert .close",function(e){return e.preventDefault(),$(this).parents(".alert").hide(),!1}),$("form").submit(function(e){var t=$(this);if(t.hasClass("submitted"))return e.preventDefault(),!1;t.addClass("submitted")}),e.auth&&setInterval(function(){$.get("/check-auth",function(e){e.isAuth||location.reload()})},12e4)}},customModule.siteAddfunds={fieldsOptions:void 0,fieldsContainer:void 0,run:function(e){var t=this;t.fieldsContainer=$("form"),t.fieldOptions=e.fieldOptions,void 0!==e.options&&(void 0!==e.options.stripe&&t.initStripe(e.options.stripe),void 0!==e.options.paywithpaytm&&t.initPaytm(e.options.paywithpaytm),void 0!==e.options.paytmimap&&t.initPaytm(e.options.paytmimap),void 0!==e.options.klikbca&&t.initKlikbca(e.options.klikbca),void 0!==e.options.authorize&&t.initAuthorize(e.options.authorize),void 0!==e.options.buypayer&&t.initBuypayer(e.options.buypayer)),$(document).on("change","#method",function(){var e=$(this).val();t.updateFields(e)}),$("#method").trigger("change")},updateFields:function(e){var t=this;if($("button[type=submit]",t.fieldsContainer).show(),$(".fields",t.fieldsContainer).remove(),$("input,select",t.fieldsContainer).prop("disabled",!1),void 0!==t.fieldOptions&&void 0!==t.fieldOptions[e]&&t.fieldOptions[e]){var r=[],a=templates["addfunds/input"],i=templates["addfunds/hidden"];$.each(t.fieldOptions[e],function(e,t){void 0!==t&&null!=t&&t&&("input"==t.type&&r.push(a(t)),"hidden"==t.type&&r.push(i(t)))}),$(".form-group",t.fieldsContainer).last().after(r.join("\r\n"))}},initStripe:function(e){var t=this,r=StripeCheckout.configure($.extend({},!0,e.configure,{token:function(e){$("#field-token").val(e.id),$("#field-email").val(e.email),t.fieldsContainer.submit()}}));$("button",t.fieldsContainer).on("click",function(a){var i=$("#method").val();if(e.type!=i)return!0;var o=!1;if($.ajax({url:t.fieldsContainer.attr("action"),data:t.fieldsContainer.serialize(),async:!1,method:"POST",success:function(e){"success"==e.status&&(o=!0)}}),!o)return!0;var n=$.extend({},!0,e.open);return n.amount=100*$("#amount").val(),r.open(n),a.preventDefault(),!1}),$(window).on("popstate",function(){r.close()})},initPaytm:function(e){var t=this,r=templates["addfunds/input"],a=templates["addfunds/description"],i=$("#method",t.fieldsContainer).parents(".form-group"),o=$("#amount",t.fieldsContainer).parents(".form-group"),n=$("label",o),d=$("button[type=submit]",t.fieldsContainer),l=n.html(),s=d.html();$(document).on("change","#method",function(o){var f=$(this).val();if(n.html(l),d.html(s),f==e.type){o.stopImmediatePropagation(),$(".fields",t.fieldsContainer).remove();var c=[];t.fieldOptions[f].description&&c.push(a($.extend({},!0,t.fieldOptions[f].description,{value:e.description}))),t.fieldOptions[f].transaction_id&&c.push(r(t.fieldOptions[f].transaction_id)),t.fieldOptions[f].amount&&n.html(t.fieldOptions[f].amount.label),t.fieldOptions[f].submit&&d.html(t.fieldOptions[f].submit.label),i.after(c.join("\r\n"))}})},initKlikbca:function(e){var t=this,r=templates["addfunds/description"],a=(templates["addfunds/disabled"],$("#method",t.fieldsContainer).parents(".form-group")),i=$("#amount",t.fieldsContainer).parents(".form-group"),o=$("button[type=submit]",t.fieldsContainer),n=$("input",i),d=$("select",a);$(document).on("change","#method",function(i){var l=$(this).val();if(l==e.type){i.stopImmediatePropagation();var s=[];t.fieldOptions[l].description&&e.description&&s.push(r($.extend({},!0,t.fieldOptions[l].description,{value:e.description}))),e.amount&&(n.val(e.amount),n.prop("disabled",!0),d.prop("disabled",!0),o.hide()),a.after(s.join("\r\n"))}})},initAuthorize:function(e){var t=this,r=e.configure,a=$("#amount"),i=$("#method"),o=$("button[type=submit]",t.fieldsContainer),n=$("<button />",r).hide();o.after(n),o.on("click",function(t){if(i.val()==e.type&&0<1*$.trim(a.val()))return t.stopImmediatePropagation(),n.trigger("click"),!1})},responseAuthorizeHandler:function(e){if("Error"===e.messages.resultCode)for(var t=0;t<e.messages.message.length;)alert(e.messages.message[t].code+": "+e.messages.message[t].text),t+=1;else $("#field-data_descriptor").val(e.opaqueData.dataDescriptor),$("#field-data_value").val(e.opaqueData.dataValue),$("form").submit()},initBuypayer:function(e){e.content&&window.open(e.content,"_top")}};var responseAuthorizeHandler=customModule.siteAddfunds.responseAuthorizeHandler;customModule.api={run:function(e){$("#service_type").length||$('div[id^="type_"]').show(),$("#service_type").change(function(){$("div[id^='type_']").hide();var e=$("#service_type").val();$("#type_"+e).show()}),$("#service_type").trigger("change")}},customModule.siteOrder={run:function(e){document.forms.sendform.submit()}},customModule.siteHistory={run:function(e){$("#setRefill").on("show.bs.modal",function(e){$("#refill_loader").show(),$("#refill_body").html("");var t=$(this),r=$("form",t);$('input[name="id"]',r).val($(e.relatedTarget).data("href")),$.post(r.attr("action"),r.serialize(),function(e){if("success"==e.status)return location.reload(),!1;"error"==e.status&&($("#refill_loader").hide(),$("#refill_body").html(e.error))})})}},customModule.siteOrder={fieldsOptions:void 0,fieldsContainer:void 0,services:[],fields:[],maxQuantity:0,run:function(e){var t=this;t.services=$.extend({},!0,e.services),t.fields=$.extend({},!0,e.fields),t.currencyOptions=$.extend({},!0,e.currency),t.format=$.extend({},!0,e.format),t.fieldsContainer=$("#fields"),t.fieldOptions=e.fieldOptions,$(document).on("change","#orderform-category",function(){var e=$(this).val();t.updateServices(e),$("#orderform-service").trigger("change")}),$(document).on("change","#orderform-service",function(){var e=$(this),r=$("option:selected",e).data("type");t.updateFields(r,!0),t.updateDescription()}),$(document).on("keyup",".counter",function(){var e=$(this),r=$("input, textarea",$("#order_"+e.data("related")+".fields"));r.length?(value=e.val(),r.val(value.split("\n").length)):r.val(0),t.updateCharge()}),$(document).on("change","#field-orderform-fields-check",function(){var e=$(this),r=e.attr("id"),a=$('.depend-fields[data-depend="'+r+'"]');e.prop("checked")?a.removeClass("hidden"):a.addClass("hidden"),t.updateTotalQuantity()}),$(document).on("keyup","#field-orderform-fields-quantity",function(){t.updateCharge()}),$(document).on("keyup","#field-orderform-fields-quantity, #field-orderform-fields-runs",function(){t.updateTotalQuantity()}),$(document).on("click",".clear-datetime",function(){var e=$(this).data("rel");$(e).val("")}),$("#orderform-category").length?$("#orderform-category").trigger("change"):t.updateServices(),t.initFields(),function(){var e=$("#orderform-service"),r=$("option:selected",e).data("type");t.updateFields(r,!1),t.updateCharge(),t.updateDescription(),$("#field-orderform-fields-check").trigger("change")}()},getMaxQuantityValue:function(){var e=this,t=e.getCurrentServicePrice();return 0>=t?Number.MAX_SAFE_INTEGER:parseInt(Number.MAX_SAFE_INTEGER-1/t)},preparePrice:function(e){var t=this,r=t.format,a=r.min;e=$.trim(e.toString().replace(",","."));var i=e.split(".");void 0!==i[1]&&(i[1]=i[1].replace(/0+$/g,""),i[1].length>a&&(a=r.max<i[1].length?r.max:i[1].length)),e=parseFloat(e),e=e.toFixed(a),1e3<=e&&(e=e.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1"+r.thousands)),e=e.replace(/\.(\d+)$/g,r.delimiter+"$1");var o=t.currencyOptions;return e=o.template.replace("{{value}}",e),e=e.replace("{{symbol}}",o.symbol)},getCurrentServicePrice:function(){var e=this,t=$("#orderform-service"),r=e.services[t.val()];if(!r)return 0;var a=r.orig_price;return parseFloat(a)},getCurrentServiceType:function(){var e=this,t=$("#orderform-service"),r=e.services[t.val()];return r?r.type:0},updateTotalQuantity:function(){var e=this,t=$("#field-orderform-fields-quantity"),r=$("#field-orderform-fields-runs"),a=$("#field-orderform-fields-total-quantity"),i=0;i=1*t.val()*(1*r.val()),a.val(i),e.updateCharge()},updateCharge:function(){var e=this,t=$("#charge"),r=t.parent(".form-group"),a=$("#field-orderform-fields-quantity"),i=$("#orderform-service"),o=e.getMaxQuantityValue();if(r.show(),t.val(e.preparePrice(0)),e.services[i.val()]){var n=e.getCurrentServicePrice(),d=1*e.getCurrentServiceType();if(10==d||14==d)return void t.val(e.preparePrice(n));if(100==d)return void r.hide();12==d&&$("#field-orderform-fields-check").prop("checked")&&(a=$("#field-orderform-fields-total-quantity"));var l=$.trim(a.val());if(!l||""==l||!l.length||isNaN(l)||!l.match(/^\d+$/gi))return void t.val("");if(l=parseInt(l),isNaN(l))return void t.val("");o<l&&(l=o),n*=l,n/=1e3,t.val(e.preparePrice(n))}},updateServices:function(e){var t=this,r=$("#orderform-service"),a=r.parent(".form-group"),i=[],o=void 0;void 0!==t.fieldOptions&&void 0!==t.fieldOptions.data&&void 0!==t.fieldOptions.data.service&&(o=t.fieldOptions.data.service),a.addClass("hidden"),r.html(""),$.each(t.services,function(t,r){void 0!==e&&e!=r.cid||i.push(r)}),i.sort(function(e,t){var r=parseInt(e.position),a=parseInt(t.position);return r<a?-1:r>a?1:0});var n=void 0;$.each(i,function(e,t){n=$("<option></option>").attr("data-type",t.type).attr("value",t.id).text(t.name),o==t.id&&n.attr("selected","selected"),r.append(n)}),$("option",r).length&&a.removeClass("hidden")},updateFields:function(e,t){var r=this,a=$('.fields input[type="text"], .fields textarea, .depend-fields input[type="text"], .depend-fields textarea');a.prop("disabled",!1),a.removeAttr("data-related"),a.removeClass("counter"),$(".fields, .depend-fields").addClass("hidden"),void 0!==r.fields[e]&&($.each(r.fields[e],function(e,t){var r=$("#order_"+t.name+".fields"),a=$("input, textarea",r);if(void 0!==t.disabled&&t.disabled){a.prop("disabled",!0);$("input, textarea",$("#order_"+t.related+".fields")).attr("data-related",t.name).addClass("counter").trigger("keyup")}r.removeClass("hidden"),r.hasClass("has-depends")&&a.trigger("change")}),void 0!==t&&t&&(a.val(""),$('.fields input[type="checkbox"]').prop("checked",!1)),r.updateCharge(),r.initDatetime())},updateDescription:function(){var e=this,t=$("#orderform-service"),r=e.services[t.val()],a=$("#service_description"),i=$("div",a);i.html(""),a.addClass("hidden"),"string"==typeof r.description&&r.description.length&&(i.html(r.description),a.removeClass("hidden"))},initFields:function(){var e=this,t=e.fieldOptions.fields,r="";e.fieldsContainer.html("");var a=[];$.each(t,function(t,i){"function"==typeof(r=templates["neworder/order_"+i])&&a.push(r(e.fieldOptions))}),e.fieldsContainer.html(a.join("\r\n")),e.initDatetime()},initDatetime:function(){$(".datetime").length&&$(".datetime").datetimepicker({format:"DD/MM/YYYY",minDate:new Date,icons:{previous:"fa fa-chevron-left",next:"fa fa-chevron-right"}})}},customModule.siteTickets={run:function(e){$("#ticketsend").submit(function(t){t.preventDefault();var r=$("#send"),a=$(this);return!r.hasClass("active")&&(r.addClass("active"),$.post(e.createTicketUrl,a.serialize(),function(e){r.removeClass("active"),"success"==e.status&&($(".ticket-danger").hide(),window.location="/tickets"),"error"==e.status&&($(".ticket-danger div").html(e.error),$(".ticket-danger").show())}),!1)})}},customModule.userInfoModal={run:function(e){this.init(e),$(document).on("click","#userInfoSubmit",function(e){e.preventDefault();var t=$(this),r=$("#userInfoForm"),a=$("#userInfoError",r);return a.addClass("hidden"),console.log(r.serialize()),custom.sendFrom(t,r,{data:r.serialize(),callback:function(e){"success"==e.status&&window.location.reload(),"error"==e.status&&(a.removeClass("hidden"),a.html(e.error))}}),!1})},init:function(e){var t=templates["user/user_info_modal"];$("body").append(t(e)),$("#userInfoModal").modal("show")}};